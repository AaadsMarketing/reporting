<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AAADS – Client Performance Dashboard (Dark · v5)</title>
<style>
  :root{
    --bg:#0b0b0b;
    --surface:#141414;
    --surface-2:#181818;
    --tile:#161616;
    --text:#f5f5f5;
    --muted:#a1a1aa;
    --border:#232323;
    --shadow: 0 10px 30px rgba(0,0,0,0.35);
    --aaads-accent:#f5a623;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
    font:15.5px/1.55 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .container{max-width:1280px;margin:0 auto;padding:28px 20px 100px}

  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:22px}
  .brand{display:flex;align-items:center;gap:14px}
  .logo{width:42px;height:42px;border-radius:12px;background:#fff;display:grid;place-items:center;color:#000;font-weight:800}
  .title h1{margin:0;font-size:22px;font-weight:800}
  .title p{margin:2px 0 0;color:var(--muted);font-size:13px}

  .controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .chip{background:#111315;border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-size:13px;color:var(--muted)}
  .btn{appearance:none;border:1px solid var(--border);background:var(--surface-2);color:var(--text);border-radius:12px;padding:8px 12px;font-weight:600;cursor:pointer}
  .btn.primary{background:var(--aaads-accent);border-color:var(--aaads-accent);color:#111}

  .grid{display:grid;gap:16px}
  .grid.cols-4{grid-template-columns:repeat(4,1fr)}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  .grid.cols-2{grid-template-columns:repeat(2,1fr)}
  @media (max-width:1100px){.grid.cols-4{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:760px){.grid.cols-4,.grid.cols-3,.grid.cols-2{grid-template-columns:1fr}}

  .card{background:linear-gradient(180deg, var(--surface), var(--surface-2));
        border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:16px}
  .section-title{display:flex;align-items:center;justify-content:space-between;margin:4px 0 10px}
  .section-title h2{margin:0;font-size:16px}
  .sub{color:var(--muted);font-size:12px}
  .divider{height:1px;background:var(--border);margin:8px 0 12px}

  /* Hero KPIs */
  .kpi .label{color:var(--muted);font-size:12px}
  .kpi .value{font-size:26px;font-weight:800;letter-spacing:0.2px}
  .kpi .delta{font-size:12px}
  .delta.up{color:#34d399}.delta.down{color:#f87171}

  /* Metric tiles */
  .tiles{display:grid;gap:12px;grid-template-columns:repeat(3,1fr)}
  @media (max-width:900px){.tiles{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:560px){.tiles{grid-template-columns:1fr}}
  .metric{background:var(--tile);border:1px solid var(--border);border-radius:14px;padding:12px 14px;display:flex;flex-direction:column;gap:6px;min-height:98px}
  .metric .meta{display:flex;align-items:center;justify-content:space-between}
  .metric .label{color:var(--muted);font-size:12px;letter-spacing:0.2px}
  .metric .unit{color:var(--muted);font-size:11px}
  .metric .value{font-size:20px;font-weight:800;line-height:1.2;letter-spacing:0.2px}
  .metric .hint{font-size:11px;color:var(--muted)}
  .metric .mini-delta{font-size:11px}
  .mini-delta.up{color:#34d399}.mini-delta.down{color:#f87171}

  /* Charts */
  .chart-wrap{height:240px;position:relative}
  canvas{width:100%;height:100%}

  table{width:100%;border-collapse:collapse}
  th,td{padding:10px 8px;text-align:left;border-bottom:1px solid var(--border);font-size:13px}
  th{font-weight:700;color:#e5e7eb}

  footer{margin-top:28px;color:var(--muted);font-size:12px;text-align:center}
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">aa</div>
        <div class="title">
          <h1>Client Performance Dashboard</h1>
          <p>AAADS – Boutique Agentur für Performance Marketing</p>
        </div>
      </div>
      <div class="controls">
        <span class="chip">Zeitraum: <strong id="rangeLabel">Letzte 7 Tage</strong></span>
        <input type="date" id="start" class="btn" />
        <input type="date" id="end" class="btn" />
        <button class="btn" id="btn7">Letzte 7 Tage</button>
        <button class="btn" id="btn30">Letzte 30 Tage</button>
        <button class="btn" id="btnThisMonth">Aktueller Monat</button>
        <button class="btn primary" id="apply">Anwenden</button>
      </div>
    </header>

    <!-- Hero KPIs -->
    <div class="grid cols-4">
      <div class="card kpi">
        <span class="label">Gesamtumsatz (Shopify)</span>
        <span class="value" id="kpiRevenue">€ 0</span>
        <span class="delta" id="kpiRevenueDelta">—</span>
      </div>
      <div class="card kpi">
        <span class="label">Gesamtausgaben (Meta + Google)</span>
        <span class="value" id="kpiSpend">€ 0</span>
        <span class="delta" id="kpiSpendDelta">—</span>
      </div>
      <div class="card kpi">
        <span class="label">ROAS gesamt</span>
        <span class="value" id="kpiROAS">0,00</span>
        <span class="delta" id="kpiROASDelta">—</span>
      </div>
      <div class="card kpi">
        <span class="label">Bestellungen gesamt</span>
        <span class="value" id="kpiOrders">0</span>
        <span class="delta" id="kpiOrdersDelta">—</span>
      </div>
    </div>

    <!-- Channels -->
    <div class="grid cols-2" style="margin-top:16px">
      <div class="card">
        <div class="section-title">
          <h2>Google Ads – KPIs</h2>
          <span class="sub">Quelle: Datalayer.ai</span>
        </div>
        <div class="divider"></div>
        <div class="tiles">
          <div class="metric"><div class="meta"><span class="label">Ad Spend</span><span class="unit">EUR</span></div><div class="value" id="g_spend">—</div><div class="mini-delta" id="g_spendDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Impressions</span></div><div class="value" id="g_impr">—</div><div class="mini-delta" id="g_imprDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Clicks</span></div><div class="value" id="g_clicks">—</div><div class="mini-delta" id="g_clicksDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CTR</span><span class="unit">%</span></div><div class="value" id="g_ctr">—</div><div class="mini-delta" id="g_ctrDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CPC</span><span class="unit">EUR</span></div><div class="value" id="g_cpc">—</div><div class="mini-delta" id="g_cpcDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Conversions</span></div><div class="value" id="g_conv">—</div><div class="mini-delta" id="g_convDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Conversion Value</span><span class="unit">EUR</span></div><div class="value" id="g_convval">—</div><div class="mini-delta" id="g_convvalDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CPA</span><span class="unit">EUR</span></div><div class="value" id="g_cpa">—</div><div class="mini-delta" id="g_cpaDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">ROAS</span></div><div class="value" id="g_roas">—</div><div class="mini-delta" id="g_roasDelta">—</div></div>
        </div>
      </div>

      <div class="card">
        <div class="section-title">
          <h2>Meta Ads – KPIs</h2>
          <span class="sub">Quelle: Datalayer.ai</span>
        </div>
        <div class="divider"></div>
        <div class="tiles">
          <div class="metric"><div class="meta"><span class="label">Ad Spend</span><span class="unit">EUR</span></div><div class="value" id="m_spend">—</div><div class="mini-delta" id="m_spendDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CPM</span><span class="unit">EUR</span></div><div class="value" id="m_cpm">—</div><div class="mini-delta" id="m_cpmDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Impressions</span></div><div class="value" id="m_impr">—</div><div class="mini-delta" id="m_imprDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CTR All</span><span class="unit">%</span></div><div class="value" id="m_ctrall">—</div><div class="mini-delta" id="m_ctrallDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Outbound CTR</span><span class="unit">%</span></div><div class="value" id="m_octr">—</div><div class="mini-delta" id="m_octrDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Outbound Clicks</span></div><div class="value" id="m_oclicks">—</div><div class="mini-delta" id="m_oclicksDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CPC</span><span class="unit">EUR</span></div><div class="value" id="m_cpc">—</div><div class="mini-delta" id="m_cpcDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Conversions</span></div><div class="value" id="m_conv">—</div><div class="mini-delta" id="m_convDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">Conversion Value</span><span class="unit">EUR</span></div><div class="value" id="m_convval">—</div><div class="mini-delta" id="m_convvalDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">CPA</span><span class="unit">EUR</span></div><div class="value" id="m_cpa">—</div><div class="mini-delta" id="m_cpaDelta">—</div></div>
          <div class="metric"><div class="meta"><span class="label">ROAS</span></div><div class="value" id="m_roas">—</div><div class="mini-delta" id="m_roasDelta">—</div></div>
        </div>
      </div>
    </div>

    <!-- Shopify -->
    <div class="card" style="margin-top:16px">
      <div class="section-title">
        <h2>Shopify – Umsatz & E-Com KPIs</h2>
        <span class="sub">Quelle: Datalayer.ai</span>
      </div>
      <div class="divider"></div>
      <div class="tiles">
        <div class="metric"><div class="meta"><span class="label">Umsatz gesamt</span><span class="unit">EUR</span></div><div class="value" id="s_rev">—</div><div class="mini-delta" id="s_revDelta">—</div></div>
        <div class="metric"><div class="meta"><span class="label">Bestellungen</span></div><div class="value" id="s_orders">—</div><div class="mini-delta" id="s_ordersDelta">—</div></div>
        <div class="metric"><div class="meta"><span class="label">AOV</span><span class="unit">EUR</span></div><div class="value" id="s_aov">—</div><div class="mini-delta" id="s_aovDelta">—</div></div>
        <div class="metric"><div class="meta"><span class="label">Conversion Rate</span><span class="unit">%</span></div><div class="value" id="s_cr">—</div><div class="mini-delta" id="s_crDelta">—</div></div>
        <div class="metric"><div class="meta"><span class="label">Sessions</span></div><div class="value" id="s_sessions">—</div><div class="mini-delta" id="s_sessionsDelta">—</div></div>
        <div class="metric"><div class="meta"><span class="label">Refunds</span><span class="unit">EUR</span></div><div class="value" id="s_refunds">—</div><div class="mini-delta" id="s_refundsDelta">—</div></div>
      </div>
      <div class="chart-wrap" style="margin-top:12px">
        <canvas id="barRevenue"></canvas>
      </div>
      <div class="sub" style="margin-top:6px">Umsatz pro Tag</div>
    </div>

    <footer>
      © AAADS – Performance Marketing Report (Mock). Stand: <span id="stamp"></span>
    </footer>
  </div>

<script>
// ---------- Helpers ----------
const fmt = new Intl.NumberFormat('de-DE');
const fmtEUR = new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'});
function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function setText(id, val){document.getElementById(id).textContent = val}

// Date helpers
function rangeDays(n){
  const a=[], d=new Date();
  for(let i=n-1;i>=0;i--){const t=new Date(d); t.setDate(d.getDate()-i); a.push(t)}
  return a;
}
let days = rangeDays(7);

// ---------- Mock state (will change on filter) ----------
let state = {};
let statePrev = {};

function genMock(n){
  const revenue = Array.from({length:n}, (_,i)=> 15000 + Math.round(Math.sin(i/2)*2000) + randInt(0,2000));
  const spend   = Array.from({length:n}, (_,i)=> 3500 + Math.round(Math.cos(i/3)*400) + randInt(0,400));
  const orders  = Array.from({length:n}, ()=> randInt(70,120));
  const sessions= Array.from({length:n}, ()=> randInt(2400,3600));
  const cr      = revenue.map((r,i)=> orders[i]/sessions[i]); // approx
  return {
    revenue, spend, orders, sessions, cr,
    meta: {
      spend: randInt(8000,13000),
      impr: randInt(1200000,2000000),
      ctrall: +(0.9 + Math.random()*0.8).toFixed(2),
      octr: +(0.5 + Math.random()*0.6).toFixed(2),
      oclicks: randInt(9000,16000),
      cpm: +(5 + Math.random()*3).toFixed(2),
      cpc: +(0.6 + Math.random()*0.4).toFixed(2),
      conv: randInt(500,900),
      convval: randInt(30000,60000),
      cpa: +(10 + Math.random()*8).toFixed(2),
      roas: +(2.5 + Math.random()*2.5).toFixed(2)
    },
    google: {
      spend: randInt(1200,2200),
      impr: randInt(200000,400000),
      clicks: randInt(4000,9000),
      ctr: +(1.2 + Math.random()*1.2).toFixed(2),
      cpc: +(0.2 + Math.random()*0.2).toFixed(2),
      conv: randInt(180,350),
      convval: randInt(9000,18000),
      cpa: +(6 + Math.random()*6).toFixed(2),
      roas: +(5 + Math.random()*6).toFixed(2)
    }
  };
}

function pctDelta(curr, prev){
  if(prev === 0) return 0;
  return ( (curr - prev) / prev ) * 100;
}

function setDelta(elId, pct, suffix=' vs. Vorperiode'){
  const el = document.getElementById(elId);
  const up = pct >= 0;
  el.classList.remove('up','down');
  el.classList.add(up ? 'up' : 'down');
  const sign = up ? '+' : '';
  el.textContent = `${sign}${pct.toFixed(1)}%${suffix}`;
}

function setMiniDelta(elId, pct){
  const el = document.getElementById(elId);
  const up = pct >= 0;
  el.classList.remove('up','down');
  el.classList.add('mini-delta', up ? 'up' : 'down');
  const sign = up ? '+' : '';
  el.textContent = `${sign}${pct.toFixed(1)}%`;
}

function applyState(){
  // current totals
  const rev = state.revenue.reduce((a,b)=>a+b,0);
  const spend = state.spend.reduce((a,b)=>a+b,0);
  const orders = state.orders.reduce((a,b)=>a+b,0);
  const roas = rev / Math.max(1, spend);

  // previous totals
  const prevRev = statePrev.revenue.reduce((a,b)=>a+b,0);
  const prevSpend = statePrev.spend.reduce((a,b)=>a+b,0);
  const prevOrders = statePrev.orders.reduce((a,b)=>a+b,0);
  const prevROAS = prevRev / Math.max(1, prevSpend);

  // header KPIs
  setText('kpiRevenue', fmtEUR.format(rev));
  setText('kpiSpend', fmtEUR.format(spend));
  setText('kpiROAS', roas.toFixed(2));
  setText('kpiOrders', fmt.format(orders));

  setDelta('kpiRevenueDelta', pctDelta(rev, prevRev));
  setDelta('kpiSpendDelta', pctDelta(spend, prevSpend));
  setDelta('kpiROASDelta', pctDelta(roas, prevROAS));
  setDelta('kpiOrdersDelta', pctDelta(orders, prevOrders));

  // Google tiles (values + deltas vs previous state's google block)
  setText('g_spend', fmtEUR.format(state.google.spend));
  setMiniDelta('g_spendDelta', pctDelta(state.google.spend, statePrev.google.spend));

  setText('g_impr', fmt.format(state.google.impr));
  setMiniDelta('g_imprDelta', pctDelta(state.google.impr, statePrev.google.impr));

  setText('g_clicks', fmt.format(state.google.clicks));
  setMiniDelta('g_clicksDelta', pctDelta(state.google.clicks, statePrev.google.clicks));

  setText('g_ctr', state.google.ctr + ' %');
  setMiniDelta('g_ctrDelta', pctDelta(state.google.ctr, statePrev.google.ctr));

  setText('g_cpc', fmtEUR.format(state.google.cpc));
  setMiniDelta('g_cpcDelta', pctDelta(state.google.cpc, statePrev.google.cpc));

  setText('g_conv', fmt.format(state.google.conv));
  setMiniDelta('g_convDelta', pctDelta(state.google.conv, statePrev.google.conv));

  setText('g_convval', fmtEUR.format(state.google.convval));
  setMiniDelta('g_convvalDelta', pctDelta(state.google.convval, statePrev.google.convval));

  setText('g_cpa', fmtEUR.format(state.google.cpa));
  setMiniDelta('g_cpaDelta', pctDelta(state.google.cpa, statePrev.google.cpa));

  setText('g_roas', state.google.roas);
  setMiniDelta('g_roasDelta', pctDelta(state.google.roas, statePrev.google.roas));

  // Meta tiles
  setText('m_spend', fmtEUR.format(state.meta.spend));
  setMiniDelta('m_spendDelta', pctDelta(state.meta.spend, statePrev.meta.spend));

  setText('m_cpm', fmtEUR.format(state.meta.cpm));
  setMiniDelta('m_cpmDelta', pctDelta(state.meta.cpm, statePrev.meta.cpm));

  setText('m_impr', fmt.format(state.meta.impr));
  setMiniDelta('m_imprDelta', pctDelta(state.meta.impr, statePrev.meta.impr));

  setText('m_ctrall', state.meta.ctrall + ' %');
  setMiniDelta('m_ctrallDelta', pctDelta(state.meta.ctrall, statePrev.meta.ctrall));

  setText('m_octr', state.meta.octr + ' %');
  setMiniDelta('m_octrDelta', pctDelta(state.meta.octr, statePrev.meta.octr));

  setText('m_oclicks', fmt.format(state.meta.oclicks));
  setMiniDelta('m_oclicksDelta', pctDelta(state.meta.oclicks, statePrev.meta.oclicks));

  setText('m_cpc', fmtEUR.format(state.meta.cpc));
  setMiniDelta('m_cpcDelta', pctDelta(state.meta.cpc, statePrev.meta.cpc));

  setText('m_conv', fmt.format(state.meta.conv));
  setMiniDelta('m_convDelta', pctDelta(state.meta.conv, statePrev.meta.conv));

  setText('m_convval', fmtEUR.format(state.meta.convval));
  setMiniDelta('m_convvalDelta', pctDelta(state.meta.convval, statePrev.meta.convval));

  setText('m_cpa', fmtEUR.format(state.meta.cpa));
  setMiniDelta('m_cpaDelta', pctDelta(state.meta.cpa, statePrev.meta.cpa));

  setText('m_roas', state.meta.roas);
  setMiniDelta('m_roasDelta', pctDelta(state.meta.roas, statePrev.meta.roas));

  // Shopify tiles (from totals)
  setText('s_rev', fmtEUR.format(rev));
  setMiniDelta('s_revDelta', pctDelta(rev, prevRev));

  setText('s_orders', fmt.format(orders));
  setMiniDelta('s_ordersDelta', pctDelta(orders, prevOrders));

  const aov = rev / Math.max(1, orders);
  const prevAOV = prevRev / Math.max(1, prevOrders);
  setText('s_aov', fmtEUR.format(aov));
  setMiniDelta('s_aovDelta', pctDelta(aov, prevAOV));

  const sessions = state.sessions.reduce((a,b)=>a+b,0);
  const prevSessions = statePrev.sessions.reduce((a,b)=>a+b,0);
  const cr = orders / Math.max(1, sessions);
  const prevCR = prevOrders / Math.max(1, prevSessions);
  setText('s_cr', (cr*100).toFixed(2) + ' %');
  setMiniDelta('s_crDelta', pctDelta(cr, prevCR));

  setText('s_sessions', fmt.format(sessions));
  setMiniDelta('s_sessionsDelta', pctDelta(sessions, prevSessions));

  setText('s_refunds', fmtEUR.format(0));
  setMiniDelta('s_refundsDelta', pctDelta(0, 0)); // stays —

  // Charts
  renderBars(document.getElementById('barRevenue'), state.revenue);
  setText('stamp', new Date().toLocaleString('de-DE'));
}

function renderBars(canvas, values){
  const ctx = canvas.getContext('2d');
  const w = canvas.width = canvas.clientWidth;
  const h = canvas.height = canvas.clientHeight;
  ctx.clearRect(0,0,w,h);
  const pad = 24, xmin=pad, xmax=w-pad, ymin=pad, ymax=h-pad;
  ctx.strokeStyle = '#232323'; ctx.lineWidth = 1;
  for(let i=0;i<5;i++){const y=ymin+(i*(ymax-ymin)/4);ctx.beginPath();ctx.moveTo(xmin,y);ctx.lineTo(xmax,y);ctx.stroke();}
  const max = Math.max(...values) || 1;
  const bw = (xmax - xmin)/values.length * 0.6;
  values.forEach((v,i)=>{
    const x = xmin + (i+0.2)*((xmax-xmin)/values.length);
    const barH = (v/max)*(ymax - ymin);
    const y = ymax - barH;
    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--aaads-accent');
    ctx.fillRect(x, y, bw, barH);
  });
}

// ---------- Date controls ----------
const startEl = document.getElementById('start');
const endEl   = document.getElementById('end');
const lbl     = document.getElementById('rangeLabel');

function setLast7(){
  const now = new Date();
  const s   = new Date(now); s.setDate(now.getDate()-6);
  startEl.valueAsDate = s; endEl.valueAsDate = now;
  lbl.textContent = 'Letzte 7 Tage';
  days = rangeDays(7);
  state = genMock(7);          // aktuelle Periode
  statePrev = genMock(7);      // Vergleich: 7 Tage zuvor
  applyState();
}
function setLast30(){
  const now = new Date();
  const s   = new Date(now); s.setDate(now.getDate()-29);
  startEl.valueAsDate = s; endEl.valueAsDate = now;
  lbl.textContent = 'Letzte 30 Tage';
  days = rangeDays(30);
  state = genMock(30);
  statePrev = genMock(30);
  applyState();
}
function setThisMonth(){
  const now = new Date();
  const s = new Date(now.getFullYear(), now.getMonth(), 1);
  const diff = Math.floor((now - s)/(1000*60*60*24))+1;
  startEl.valueAsDate = s; endEl.valueAsDate = now;
  lbl.textContent = 'Aktueller Monat';
  days = rangeDays(Math.max(7, Math.min(31, diff)));
  state = genMock(days.length);
  statePrev = genMock(days.length);
  applyState();
}
document.getElementById('btn7').onclick = setLast7;
document.getElementById('btn30').onclick = setLast30;
document.getElementById('btnThisMonth').onclick = setThisMonth;
document.getElementById('apply').onclick = ()=>{
  if(startEl.value && endEl.value){
    const s = new Date(startEl.value);
    const e = new Date(endEl.value);
    const diff = Math.max(1, Math.round((e - s)/(1000*60*60*24))+1);
    lbl.textContent = s.toLocaleDateString('de-DE') + ' – ' + e.toLocaleDateString('de-DE');
    const n = Math.min(31, Math.max(7, diff));
    days = rangeDays(n);
    state = genMock(n);      // aktuelle Periode
    statePrev = genMock(n);  // Vorperiode mit gleicher Länge
    applyState();
  }
};

// init
setLast7();
</script>
</body>
</html>
